var canBeLoaded=!0,bottomOffset=1500,canSearch=!0;function a2020_load_more(){admin2020_admin_content_ajax.current_page||(admin2020_admin_content_ajax.current_page=1),term=jQuery("#a2020_search_content").val(),jQuery("#admin2020folderswrap .folder_title.uk-active").length>0&&(folder_id=jQuery("#admin2020folderswrap .folder_title.uk-active").attr("folder-id")),jQuery(".admin2020allFolders a.uk-active").length>0&&(folder_id=jQuery(".admin2020allFolders a.uk-active").attr("folder-id")),jQuery.ajax({url:admin2020_admin_content_ajax.ajax_url,type:"post",data:{action:"a2020_fetch_more_media",security:admin2020_admin_content_ajax.security,page:admin2020_admin_content_ajax.current_page,term:term,folder_id:folder_id},beforeSend:function(e){canBeLoaded=!1,jQuery("#admincontentloader").show()},success:function(e){e?(canBeLoaded=!0,admin2020_admin_content_ajax.current_page++,jQuery("#a2020_media_items").append(e),options=[],options.target="#a2020_media_items",UIkit.filter("#a2020_content_filter",options)):canBeLoaded=!1,jQuery("#admincontentloader").hide()}})}function a2020_select_media_item(e,t){if(t.shiftKey){if(this_item_index=jQuery(e).parent().index(),last_item_index=jQuery(".a2020_selected").last().parent().index(),attachments=jQuery("#a2020_media_items").children(),this_item_index>last_item_index)for(i=last_item_index;i<this_item_index+1;++i)jQuery(attachments[i]).is(":visible")&&jQuery(attachments[i]).find(".a2020_attachment").addClass("a2020_selected");if(this_item_index<last_item_index)for(i=this_item_index;i<last_item_index+1;++i)jQuery(attachments[i]).is(":visible")&&jQuery(attachments[i]).find(".a2020_attachment").addClass("a2020_selected")}else jQuery(e).toggleClass("a2020_selected");jQuery(".a2020_selected").length>0?jQuery(".a2020_bulk_actions").show():jQuery(".a2020_bulk_actions").hide()}function a2020_fetch_attachment_modal(e){jQuery(this).removeClass("a2020_selected"),jQuery.ajax({url:admin2020_admin_content_ajax.ajax_url,type:"post",data:{action:"a2020_fetch_attachment_modal",security:admin2020_admin_content_ajax.security,attachmentid:e},success:function(e){if(e){jQuery("#admin2020MediaViewer_content").html(e),UIkit.modal("#admin2020MediaViewer").show();wp.editor.remove("post_preview_editor"),wp.editor.initialize("post_preview_editor",{tinymce:{toolbar1:"bold,italic,bullist,link"},quicktags:{buttons:"strong,em,link,ul,li,code"}})}}})}function admin2020_set_featured_image(){var e;e?e.open():((e=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:!1})).on("select",function(){var t=e.state().get("selection").first().toJSON();jQuery("#admin2020_post_image_select #admin2020_post_image").attr("data-src",t.url),jQuery("#admin2020_post_image_select #admin2020_post_image").attr("data-id",t.id)}),e.open())}function admin2020_save_post(){UIkit.switcher("#admin2020_post_switcher").show(0),setTimeout(admin2020_save_post_send,1)}function admin2020_save_post_send(){categories=[],jQuery(".admin2020_categories input:checkbox:checked").each(function(e,t){categories.push(jQuery(t).val())}),title=jQuery("#admin2020_viewer_title").val(),content=wp.editor.getContent("post_preview_editor"),postid=jQuery("#admin2020_viewer_currentid").text(),status=jQuery("#admin2020_post_status").val(),image=jQuery("#admin2020_post_image_select #admin2020_post_image").attr("data-id"),jQuery.ajax({url:admin2020_admin_content_ajax.ajax_url,type:"post",data:{action:"a2020_save_post",security:admin2020_admin_content_ajax.security,title:title,content:content,postid:postid,categories:categories,status:status,image:image},success:function(e){e&&(data=JSON.parse(e),data.error?UIkit.notification(data.error_message,"danger"):(jQuery("#a2020_media_items [attachment_id='"+postid+"']").replaceWith(data.html),UIkit.notification(data.message,"success")))}})}function a2020_delete_item(e){""!=e&&jQuery.ajax({url:admin2020_admin_content_ajax.ajax_url,type:"post",data:{action:"a2020_delete_item",security:admin2020_admin_content_ajax.security,post_id:e},success:function(t){t&&(data=JSON.parse(t),data.error?UIkit.notification(data.error_message,"danger"):(UIkit.notification(data.message,"success"),jQuery("#a2020_media_items [attachment_id='"+e+"']").remove(),UIkit.modal("#admin2020MediaViewer").hide()))}})}function a2020_save_attachment(e){title=jQuery("#admin2020_viewer_input_title").val(),imgalt=jQuery("#admin2020_viewer_altText").val(),caption=jQuery("#admin2020_viewer_caption").val(),description=jQuery("#admin2020_viewer_description").val(),jQuery.ajax({url:admin2020_admin_content_ajax.ajax_url,type:"post",data:{action:"a2020_save_attachment",security:admin2020_admin_content_ajax.security,title:title,imgalt:imgalt,caption:caption,description:description,imgid:e},success:function(t){t&&(data=JSON.parse(t),data.error?UIkit.notification(data.error_message,"danger"):(jQuery("#a2020_media_items [attachment_id='"+e+"']").replaceWith(data.html),UIkit.notification(data.message,"success")))}})}function switchinfo(e,t){current=jQuery("#a2020_media_items [attachment_id='"+t+"']"),"right"==e&&(jQuery(current).next().hasClass("attachment_wrap")?next_id=jQuery(current).next().attr("attachment_id"):next_id=jQuery(current).next().next().attr("attachment_id")),"left"==e&&(jQuery(current).prev().hasClass("attachment_wrap")?next_id=jQuery(current).prev().attr("attachment_id"):next_id=jQuery(current).prev().prev().attr("attachment_id")),next_id&&a2020_fetch_attachment_modal(next_id)}function a2020_duplicate_post(e){e&&""!=e&&jQuery.ajax({url:admin2020_admin_content_ajax.ajax_url,type:"post",data:{action:"a2020_duplicate_post",security:admin2020_admin_content_ajax.security,postid:e},success:function(e){e&&(data=JSON.parse(e),data.error?UIkit.notification(data.error_message,"danger"):(jQuery("#a2020_media_items .attachment_wrap").first().before(data.html),UIkit.notification(data.message,"success")))}})}function a2020_delete_multiple(){var e=[];jQuery(".a2020_selected").each(function(){e.push(jQuery(this).parent().attr("attachment_id"))}),e.length<1||UIkit.modal.confirm("Delete "+e.length+" items?").then(function(){jQuery.ajax({url:admin2020_admin_content_ajax.ajax_url,type:"post",data:{action:"a2020_delete_item",security:admin2020_admin_content_ajax.security,post_id:e},success:function(t){t&&(data=JSON.parse(t),data.error?UIkit.notification(data.error_message,"danger"):(UIkit.notification(data.message,"success"),jQuery.each(e,function(e,t){jQuery("#a2020_media_items [attachment_id='"+t+"']").remove()}),jQuery(".a2020_bulk_actions").hide()))}})},function(){})}function add_batch_rename_item(){itemtoadd=jQuery("#batch_name_chooser").val(),""!=itemtoadd&&jQuery.ajax({url:admin2020_admin_content_ajax.ajax_url,type:"post",data:{action:"a2020_add_batch_rename_item",security:admin2020_admin_content_ajax.security,itemtoadd:itemtoadd},success:function(e){e&&(jQuery("#batch_rename_builder").append(e),build_batch_rename_preview())}})}function build_batch_rename_preview(){name_preview="",jQuery("#batch_rename_builder .rename_item").each(function(){type=jQuery(this).find(".batch_rename_option").attr("name"),"date"==type||"text"==type?value=jQuery(this).find("input").val():value="{"+type+"}",name_preview+=value}),jQuery("#batch_rename_preview").text(name_preview)}function batch_rename_process(){if(jQuery("#a2020_media_items .a2020_selected").length<1)UIkit.notification("No Items Selected","warning");else if(jQuery("#batch_rename_builder .rename_item").length<1)UIkit.notification("You must add at least one naming item","warning");else{theids=[],jQuery("#a2020_media_items .a2020_selected").each(function(e,t){theid=jQuery(t).parent().attr("attachment_id"),theids.push(theid)});var e=[],t=[];jQuery("#batch_rename_builder .rename_item").each(function(){type=jQuery(this).find(".batch_rename_option").attr("name"),"date"==type||"text"==type||"sequence"==type||"meta"==type?value=jQuery(this).find("input").val():value="",e.push(type),t.push(value)}),item_to_rename=jQuery("#form-stacked-select").val(),jQuery.ajax({url:admin2020_admin_content_ajax.ajax_url,type:"post",data:{action:"a2020_process_batch_rename",security:admin2020_admin_content_ajax.security,structure:e,values:t,ids:theids,item_to_rename:item_to_rename},success:function(e){e&&(data=JSON.parse(e),data.error?UIkit.notification(data.error,"danger"):UIkit.notification(data.message,"success"))}})}}function admin2020_set_content_folder_query(e){term=jQuery("#a2020_search_content").val(),jQuery.ajax({url:admin2020_admin_content_ajax.ajax_url,type:"post",data:{action:"admin2020_set_content_folder_query",security:admin2020_admin_content_ajax.security,term:term,folder_id:e},beforeSend:function(e){canBeLoaded=!1},success:function(e){e?(canBeLoaded=!0,admin2020_admin_content_ajax.current_page=1,jQuery("#a2020_media_items").html(e),options=[],options.target="#a2020_media_items",UIkit.filter("#a2020_content_filter",options)):canBeLoaded=!1}})}function a2020_edit_image(e,t){imageEditor=new tui.ImageEditor("#admin2020_image_edit_area",{includeUI:{loadImage:{path:e,name:"Blank"},theme:blackTheme,initMenu:"filter",menuBarPosition:"right"},cssMaxWidth:700,cssMaxHeight:500,usageStatistics:!1}),window.onresize=function(){imageEditor.ui.resizeEditor()},jQuery(".tui-image-editor-header-buttons .tui-image-editor-download-btn").replaceWith('<span class="uk-padding-small" style="float:left"><a onclick="admin2020_save_edited_as_copy(this);" href="#" class="uk-button uk-button-primary uk-margin-right" >Save as copy</a><a href="#" onclick="admin2020_save_edited(this);" class="uk-button uk-button-primary" >Save</a></span>'),jQuery(".tui-image-editor-header-logo").hide(),jQuery(".tui-image-editor-header-buttons div:first").hide(),jQuery(".admin2020_image_edit_wrap").show()}function admin2020_save_edited(e){jQuery(e).html('Saving <div class="image_save_spinner" uk-spinner></div>'),imageurl=jQuery("#admin2020_viewer_fullLink").val(),parts=imageurl.split("/"),filename=parts[parts.length-1];var t=jQuery("#admin2020_viewer_currentid").text();img=imageEditor.toDataURL(),blob=dataURLtoBlob(img),fd=new FormData,fd.append("ammended_image",blob,filename),fd.append("attachmentid",t),fd.append("security",admin2020_admin_content_ajax.security),fd.append("action","a2020_upload_edited_image"),jQuery.ajax({url:admin2020_admin_content_ajax.ajax_url,type:"post",data:fd,async:!0,cache:!1,contentType:!1,processData:!1,success:function(e){e&&(data=JSON.parse(e),data.error?UIkit.notification(data.error_message,"danger"):(jQuery("#a2020_media_items [attachment_id='"+t+"']").replaceWith(data.html),jQuery(".admin2020_image_edit_wrap").hide(),UIkit.modal("#admin2020MediaViewer").hide(),UIkit.notification(data.message,"success")))},error:function(e){console.log(e)}})}function admin2020_save_edited_as_copy(e){jQuery(e).html('Saving <div class="image_save_spinner" uk-spinner></div>'),imageurl=jQuery("#admin2020_viewer_fullLink").val(),parts=imageurl.split("/"),filename=parts[parts.length-1];var t=jQuery("#admin2020_viewer_currentid").text();img=imageEditor.toDataURL(),blob=dataURLtoBlob(img),fd=new FormData,fd.append("ammended_image",blob,filename),fd.append("attachmentid",t),fd.append("file_name",filename),fd.append("security",admin2020_admin_content_ajax.security),fd.append("action","a2020_upload_edited_image_as_copy"),jQuery.ajax({url:admin2020_admin_content_ajax.ajax_url,type:"post",data:fd,async:!0,cache:!1,contentType:!1,processData:!1,success:function(e){e&&(data=JSON.parse(e),data.error?UIkit.notification(data.error_message,"danger"):(html=data.html,jQuery("#a2020_media_items .attachment_wrap").first().before(html),jQuery(".admin2020_image_edit_wrap").hide(),UIkit.modal("#admin2020MediaViewer").hide(),UIkit.notification(data.message,"success")))},error:function(e){console.log(e)}})}function dataURLtoBlob(e){for(var t=e.split(","),a=t[0].match(/:(.*?);/)[1],i=atob(t[1]),n=i.length,r=new Uint8Array(n);n--;)r[n]=i.charCodeAt(n);return new Blob([r],{type:a})}jQuery(document).ready(function(e){e("#a2020_atachment_size").on("input",function(){height=e(this).val(),e(".a2020_attachment").css("height",height+"px")}),e("#a2020_atachment_size").on("change",function(){height=e(this).val(),a2020_save_user_prefences("attachment_size",height,!1)}),e("#a2020_list_view").on("click",function(){jQuery("#a2020_media_items").toggleClass("a2020_list_view"),jQuery("#a2020_media_items").hasClass("a2020_list_view")?value="list":value="grid",a2020_save_user_prefences("content_list_view",value,!1)}),e("#a2020_folder_toggle").on("click",function(){jQuery("#folder_panel").prop("hidden")?(jQuery("#folder_panel").prop("hidden",!1),value="visible"):(jQuery("#folder_panel").prop("hidden",!0),value="hidden"),a2020_save_user_prefences("content_folder_view",value,!1)}),e("#a2020_search_content").on("input",function(){term=e(this).val(),0!=canSearch&&e.ajax({url:admin2020_admin_content_ajax.ajax_url,type:"post",data:{action:"a2020_search_content",security:admin2020_admin_content_ajax.security,term:term},beforeSend:function(e){canSearch=!1},success:function(e){e&&(admin2020_admin_content_ajax.current_page=1,canSearch=!0,jQuery("#a2020_media_items").html(e),options=[],options.target="#a2020_media_items",UIkit.filter("#a2020_content_filter",options))}})}),e(window).scroll(function(){e(document).scrollTop()>e(document).height()-bottomOffset&&1==canBeLoaded&&a2020_load_more()})}),jQuery(function(){jQuery.fn.filepond.registerPlugin(FilePondPluginFileEncode),jQuery.fn.filepond.registerPlugin(FilePondPluginFileValidateSize),jQuery.fn.filepond.registerPlugin(FilePondPluginImageExifOrientation),jQuery.fn.filepond.registerPlugin(FilePondPluginFileValidateType),jQuery.fn.filepond.setDefaults({acceptedFileTypes:JSON.parse(admin2020_admin_content_ajax.a2020_allowed_types),allowRevert:!1})}),jQuery(document).ready(function(e){e("#a2020_file_upload").filepond(),FilePond.setOptions({server:{url:admin2020_admin_content_ajax.ajax_url,type:"post",process:{url:"?action=a2020_process_upload&security="+admin2020_admin_content_ajax.security,method:"POST",onload:e=>{if(e){if(data=JSON.parse(e),data.error)return e;html=data.html,jQuery("#a2020_media_items .attachment_wrap").first().before(html),options=[],options.target="#a2020_media_items",UIkit.filter("#a2020_content_filter",options)}return e}}}})});